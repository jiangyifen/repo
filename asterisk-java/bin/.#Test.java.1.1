import java.io.IOException;

import org.asteriskjava.manager.AuthenticationFailedException;
import org.asteriskjava.manager.ManagerConnection;
import org.asteriskjava.manager.ManagerConnectionFactory;
import org.asteriskjava.manager.TimeoutException;
import org.asteriskjava.manager.action.QueueStatusAction;

public class Test extends Thread
{
    private ManagerConnection managerConnection;

    public Test() throws IOException
    {
        ManagerConnectionFactory factory = new ManagerConnectionFactory(
                "192.168.35.9", "manager", "123456");

        this.managerConnection = factory.createManagerConnection();
        this.managerConnection.addEventListener(new MyListener());
    }

    public void run() 
    {
       
        try {
			managerConnection.login();
			while(true){
				System.out.println();
				System.out.println();
				System.out.println();
				managerConnection.sendAction(new QueueStatusAction(),null);
				sleep(1000);
			}
		} catch (IllegalStateException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (AuthenticationFailedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (TimeoutException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
       
    }

    public static void main(String[] args) throws Exception
    {
        Test helloManager;
        helloManager = new Test();
        helloManager.start();
    	

    	
    }
}